<div class="question-container">
    <!-- Question Body -->
    <div class="question-body mb-4" [innerHTML]="config?.question?.body"></div>

    <!-- Drawing Area -->
    <div class="canvas-container">
      <!-- Base Grid SVG -->
      <svg #baseGrid
           viewBox="-50 -50 100 100"
           class="grid-svg">
        <!-- Background -->
        <rect x="-50" y="-50" width="100" height="100" fill="white"/>

        <!-- Grid lines -->
        <g stroke="#eee" stroke-width="0.2">
          <!-- Vertical grid lines - generated by *ngFor -->
          <line *ngFor="let n of gridLines"
                [attr.x1]="n" [attr.y1]="-50"
                [attr.x2]="n" [attr.y2]="50"/>

          <!-- Horizontal grid lines - generated by *ngFor -->
          <line *ngFor="let n of gridLines"
                [attr.x1]="-50" [attr.y1]="n"
                [attr.x2]="50" [attr.y2]="n"/>
        </g>

        <!-- Main axes -->
        <g stroke="black" stroke-width="0.5">
          <line x1="-50" y1="0" x2="50" y2="0"/>
          <line x1="0" y1="-50" x2="0" y2="50"/>

          <!-- X axis arrow -->
          <polygon points="50,0 48,-2 48,2" fill="black"/>
          <!-- Y axis arrow -->
          <polygon points="0,-50 -2,-48 2,-48" fill="black"/>
        </g>
      </svg>

      <!-- Drawing Canvas -->
      <canvas #drawingCanvas
              class="drawing-canvas"
              (mousedown)="startDrawing($event)"
              (mousemove)="draw($event)"
              (mouseup)="stopDrawing()"
              (mouseleave)="stopDrawing()"
              (touchstart)="startDrawing($event)"
              (touchmove)="draw($event)"
              (touchend)="stopDrawing()">
      </canvas>
    </div>

    <!-- Drawing Controls -->
    <div class="drawing-controls">
      <button class="control-btn clear-btn" (click)="clearCanvas()">
        مسح الرسم
      </button>
      <div class="control-group">
        <label>لون القلم:</label>
        <input type="color" [(ngModel)]="currentColor" class="color-picker">
      </div>
      <div class="control-group">
        <label>حجم القلم:</label>
        <input type="range"
               min="1"
               max="10"
               [(ngModel)]="lineWidth"
               class="line-width-slider">
      </div>
    </div>
  </div>
