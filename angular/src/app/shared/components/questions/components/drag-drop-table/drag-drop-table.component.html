<!-- Title + instructions -->
<div class="d-flex gap-3 mt-2 mb-7">
    <p class="mb-0 fw-medium">{{ l('TablesDesign') }}</p>
    <span class="d-inline-block text-gray-600 fw-normal">
      {{ l('Enter row/column count & generate table. Then fill each cell & check pinned if needed.') }}
    </span>
  </div>

  <!-- Row/Col inputs + Generate button -->
  <div class="row mb-5">
    <div class="col-md-5 d-flex align-items-center gap-5">
      <!-- Table Height (# of columns) -->
      <input
        name="tableHeight"
        class="form-control m-input"
        [placeholder]="l('TableHeight')"
        type="number"
        [(ngModel)]="tableHeight"
      />
      <svg width="25" height="25" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M0.491797 13.2979C-0.0519531 12.7541 -0.0519531 11.8541 0.491797 11.3104L11.1043 0.697852C11.648 0.154102 12.548 0.154102 13.0918 0.697852C13.6355 1.2416 13.6355 2.1416 13.0918 2.68535L2.4793 13.2979C2.2168 13.5791 1.8418 13.7104 1.48555 13.7104C1.1293 13.7104 0.773047 13.5791 0.491797 13.2979Z"
          fill="#565D6D"
        />
        <path
          d="M11.1043 13.2979L0.491797 2.68535C-0.0519531 2.1416 -0.0519531 1.2416 0.491797 0.697852C1.03555 0.154102 1.93555 0.154102 2.4793 0.697852L13.0918 11.3104C13.6355 11.8541 13.6355 12.7541 13.0918 13.2979C12.8105 13.5791 12.4543 13.7104 12.098 13.7104C11.7418 13.7104 11.3855 13.5791 11.1043 13.2979Z"
          fill="#565D6D"
        />
      </svg>
      <!-- Table Width (# of rows) -->
      <input
        name="tableWidth"
        class="form-control m-input"
        [placeholder]="l('TableWidth')"
        type="number"
        [(ngModel)]="tableWidth"
      />
    </div>

    <div class="col-md-1 mt-md-0 mt-4">
      <!-- Generate (Build) the table -->
      <button class="btn btn-primary w-md-auto w-100 p-3" (click)="buildOrUpdateTable()">
        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M3.05484 21.0299C2.51484 20.4899 2.21484 19.7699 2.21484 18.9999C2.21484 18.2299 2.51484 17.5099 3.05484 16.9699L16.0548 3.96988C17.1748 2.84988 18.9948 2.84988 20.1148 3.96988C20.6548 4.50988 20.9548 5.22988 20.9548 5.99988C20.9548 6.76988 20.6548 7.48988 20.1148 8.02988L7.11484 21.0299C6.55484 21.5899 5.82484 21.8699 5.08484 21.8699C4.34484 21.8699 3.61484 21.5899 3.05484 21.0299ZM17.1148 5.02988L4.11484 18.0299C3.85484 18.2899 3.71484 18.6299 3.71484 18.9999C3.71484 19.3699 3.85484 19.7099 4.11484 19.9699C4.64484 20.4999 5.52484 20.4999 6.05484 19.9699L19.0548 6.96988C19.3148 6.70988 19.4548 6.36988 19.4548 5.99988C19.4548 5.62988 19.3148 5.28988 19.0548 5.02988C18.7848 4.75988 18.4348 4.62988 18.0848 4.62988C17.7348 4.62988 17.3848 4.75988 17.1148 5.02988Z"
            fill="white"
          />
          <path
            d="M17.5632 9.52018L14.5632 6.52018C14.2732 6.23018 14.2732 5.75018 14.5632 5.46018C14.8532 5.17018 15.3332 5.17018 15.6232 5.46018L18.6232 8.46018C18.9132 8.75018 18.9132 9.23018 18.6232 9.52018C18.4732 9.67018 18.2832 9.74018 18.0932 9.74018C17.9032 9.74018 17.7132 9.67018 17.5632 9.52018Z"
            fill="white"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9.94306 5.48005L8.58306 5.08005L7.22306 5.48005C7.04306 5.53005 6.85306 5.48005 6.73306 5.35005C6.60306 5.22005 6.55306 5.04005 6.60306 4.86005L7.00306 3.50005L6.60306 2.14005C6.55306 1.96005 6.60306 1.77005 6.73306 1.65005C6.86306 1.52005 7.05306 1.47005 7.22306 1.52005L8.58306 1.92005L9.94306 1.52005C10.1231 1.47005 10.3031 1.52005 10.4331 1.65005C10.5631 1.78005 10.6131 1.97005 10.5631 2.14005L10.1631 3.50005L10.5631 4.86005C10.6131 5.04005 10.5631 5.23005 10.4331 5.35005C10.3431 5.45005 10.2131 5.50005 10.0831 5.50005C10.0331 5.50005 9.99306 5.49005 9.94306 5.48005ZM8.72306 4.08005L9.34306 4.26005L9.16306 3.64005C9.13306 3.55005 9.13306 3.45005 9.16306 3.36005L9.34306 2.74005L8.72306 2.92005C8.63306 2.95005 8.53306 2.95005 8.44306 2.92005L7.82306 2.74005L8.00306 3.36005C8.03306 3.45005 8.03306 3.55005 8.00306 3.64005L7.82306 4.26005L8.44306 4.08005C8.49306 4.07005 8.53306 4.06005 8.58306 4.06005C8.63306 4.06005 8.67306 4.07005 8.72306 4.08005Z"
            fill="white"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M5.94306 11.4801L4.58306 11.0801L3.22306 11.4801C3.04306 11.5301 2.86306 11.4801 2.73306 11.3501C2.60306 11.2201 2.55306 11.0301 2.60306 10.8601L3.00306 9.50005L2.60306 8.14005C2.55306 7.96005 2.60306 7.77005 2.73306 7.65005C2.86306 7.53005 3.05306 7.47005 3.22306 7.52005L4.58306 7.92005L5.94306 7.52005C6.11306 7.47005 6.30306 7.52005 6.43306 7.65005C6.56306 7.78005 6.61306 7.97005 6.56306 8.14005L6.16306 9.50005L6.56306 10.8601C6.61306 11.0401 6.56306 11.2301 6.43306 11.3501C6.34306 11.4501 6.21306 11.5001 6.08306 11.5001C6.03306 11.5001 5.99306 11.4901 5.94306 11.4801ZM4.72306 10.0801L5.34306 10.2601L5.16306 9.64005C5.13306 9.55005 5.13306 9.45005 5.16306 9.36005L5.34306 8.74005L4.72306 8.92005C4.63306 8.95005 4.53306 8.95005 4.44306 8.92005L3.82306 8.74005L4.00306 9.36005C4.03306 9.45005 4.03306 9.55005 4.00306 9.64005L3.82306 10.2601L4.44306 10.0801C4.49306 10.0701 4.53306 10.0601 4.58306 10.0601C4.63306 10.0601 4.67306 10.0701 4.72306 10.0801Z"
            fill="white"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M20.9431 16.4801L19.5831 16.0801L18.2231 16.4801C18.0431 16.5301 17.8631 16.4801 17.7331 16.3501C17.6031 16.2201 17.5531 16.0301 17.6031 15.8601L18.0031 14.5001L17.6031 13.1401C17.5531 12.9601 17.6031 12.7701 17.7331 12.6501C17.8631 12.5301 18.0531 12.4701 18.2231 12.5201L19.5831 12.9201L20.9431 12.5201C21.1131 12.4701 21.3031 12.5201 21.4331 12.6501C21.5631 12.7801 21.6131 12.9701 21.5631 13.1401L21.1631 14.5001L21.5631 15.8601C21.6131 16.0401 21.5631 16.2301 21.4331 16.3501C21.3431 16.4501 21.2131 16.5001 21.0831 16.5001C21.0331 16.5001 20.9931 16.4901 20.9431 16.4801ZM19.7231 15.0801L20.3431 15.2601L20.1631 14.6401C20.1331 14.5501 20.1331 14.4501 20.1631 14.3601L20.3431 13.7401L19.7231 13.9201C19.6331 13.9501 19.5331 13.9501 19.4431 13.9201L18.8231 13.7401L19.0031 14.3601C19.0331 14.4501 19.0331 14.5501 19.0031 14.6401L18.8231 15.2601L19.4431 15.0801C19.4931 15.0701 19.5331 15.0601 19.5831 15.0601C19.6331 15.0601 19.6731 15.0701 19.7231 15.0801Z"
            fill="white"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- Display the table -->
  <table class="table table-bordered">
    <thead>
      <tr *ngIf="value?.length > 0">
        <!-- Each column's dragDropTableHeader -->
        <th *ngFor="let colDto of value; let colIndex = index">
          <input
            type="text"
            class="form-control"
            [(ngModel)]="colDto.dragDropTableHeader"
            (ngModelChange)="notifyValueChange()"
          />
        </th>
      </tr>
    </thead>

    <tbody>
      <!-- We'll build row count from the first column's item array -->
      <tr
        *ngFor="
          let rowIndex of [].constructor(value[0]?.dragDropTableItems?.length || 0);
          let r = index
        "
      >
        <td
          *ngFor="let colDto of value; let c = index"
          class="text-start"
        >
          <div class="d-flex justify-content-center align-items-center">
            <p-checkbox
              [binary]="true"
              [(ngModel)]="colDto.dragDropTableItems[r].isPinned"
              (ngModelChange)="notifyValueChange()"
            ></p-checkbox>

            <input
              type="text"
              class="form-control mt-1"
              [(ngModel)]="colDto.dragDropTableItems[r].title"
              (ngModelChange)="notifyValueChange()"
            />
          </div>
        </td>
      </tr>
    </tbody>
  </table>
